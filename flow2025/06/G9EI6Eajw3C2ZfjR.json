{
  "active": true,
  "connections": {
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Gemini总结",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "提取有效内容": {
      "main": [
        [
          {
            "node": "Gemini总结",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "读取L站热门消息": {
      "main": [
        [
          {
            "node": "取前20条帖子",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "每天运行一次": {
      "main": [
        [
          {
            "node": "读取L站热门消息",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini总结": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "取前20条帖子": {
      "main": [
        [
          {
            "node": "提取有效内容",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-06-29T09:19:19.879Z",
  "id": "G9EI6Eajw3C2ZfjR",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "LinuxDo",
  "nodes": [
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        420,
        380
      ],
      "id": "8a11e3e2-0630-4674-822a-f19b2f7b45d6",
      "name": "Google Gemini Chat Model",
      "notesInFlow": true,
      "credentials": {
        "googlePalmApi": {
          "id": "DGTbpnd2WNVix3Be",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=以下为L站的帖子的内容\n{{ $json.text }}",
        "messages": {
          "messageValues": [
            {
              "message": "你是论坛内容分析助手。针对每篇帖子，请严格按以下的格式提供输出：\n\n    <div class=\"container\">\n        <div class=\"header\">\n            <div class=\"title\">xx(序号).原标题:</div>\n            <div class=\"author\">🖋️作者：作者名</div>\n            <div><a href=\"原链接\" class=\"link\">🔗链接：原链接</a></div>\n        </div>\n\n        <div class=\"content-section\">\n            <h3>📊内容分析:</h3>\n            <ul>\n                <li><span>📌核心内容：</span>用简洁的几个句子全面概括相应帖子内容</li>\n                <li><span>🔑重要信息：</span>列出2-3个关键点</li>\n                <li><span>💡实用价值：</span>提取可操作的信息(如有)</li>\n            </ul>\n        </div>\n    </div>\n\n处理原则：\n- 保持简洁，避免冗长\n- 突出实用性内容\n- 如涉及资源，标注使用条件\n- 如涉及技术，标注关键参数\n- 输出格式统一，方便阅读，不要有多余的类似“```html”的标识\n- 重要信息优先\n"
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.4,
      "position": [
        360,
        220
      ],
      "id": "ef7b3bbe-f868-4f38-a2ff-2fa38488d0de",
      "name": "Gemini总结",
      "retryOnFail": true,
      "notesInFlow": true
    },
    {
      "parameters": {
        "jsCode": "// 获取上一节点传递过来的 items\nconst items = $input.all();\n\n// 创建一个空字符串，用来存储合并后的文本\nlet text = \"\";\n\n// 遍历所有的 items，并提取出所需的信息\nitems.forEach((item, index) => {\n    // 获取当前 item 的信息\n    const creator = item.json.creator;\n    const title = item.json.title;\n    const link = item.json.link;\n    const contentSnippet = item.json.contentSnippet;\n\n    // 按照指定格式将每个 item 的信息拼接\n    text += `第${index + 1}篇帖子标题：${title} \\n 第${index + 1}篇帖子作者：${creator} \\n 第${index + 1}篇帖子链接：${link} \\n 第${index + 1}篇帖子内容：${contentSnippet} \\n\\n`;\n});\n\n// 将合并后的字符串赋值给 text 变量\nreturn {\n    text: text.trim() // 去除最后的多余换行\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        200,
        220
      ],
      "id": "9a3558e4-b0a7-4712-8190-b542ceb02401",
      "name": "提取有效内容",
      "retryOnFail": true
    },
    {
      "parameters": {
        "url": "https://linuxdorss.longpink.com/top.xml",
        "options": {}
      },
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1.1,
      "position": [
        -240,
        220
      ],
      "id": "5133a13f-f241-4c17-b170-502a52c71139",
      "name": "读取L站热门消息",
      "retryOnFail": true
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtMinute": 30
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -420,
        220
      ],
      "id": "21199815-5b32-491e-a301-853fef91ee5b",
      "name": "每天运行一次",
      "notesInFlow": true
    },
    {
      "parameters": {
        "maxItems": 20
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -20,
        220
      ],
      "id": "05d3aaeb-7a2a-4939-a08f-5afa238fa76f",
      "name": "取前20条帖子"
    },
    {
      "parameters": {
        "fromEmail": "xxx675702999@163.com",
        "toEmail": "675702999@qq.com",
        "subject": "LinuxDO热门话题🔥",
        "html": "=<!DOCTYPE html>\n<html lang=\"zh\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <style>\n        body {\n            font-family: 'Arial', sans-serif;\n            line-height: 1.6;\n            margin: 0;\n            padding: 0;\n            background-color: #f4f4f4;\n            color: #333;\n        }\n        .container {\n            max-width: 600px;\n            margin: 20px auto;\n            padding: 20px;\n            background-color: #fff;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        }\n        .header {\n            text-align: center;\n            margin-bottom: 20px;\n        }\n        .title {\n            font-size: 24px;\n            font-weight: bold;\n            color: #2c3e50;\n        }\n        .author {\n            font-size: 16px;\n            color: #7f8c8d;\n        }\n        .link {\n            font-size: 16px;\n            color: #3498db;\n            text-decoration: none;\n        }\n        .content-section {\n            margin-bottom: 20px;\n        }\n        .content-section h3 {\n            font-size: 18px;\n            color: #2980b9;\n        }\n        .content-section ul {\n            list-style-type: none;\n            padding-left: 0;\n        }\n        .content-section ul li {\n            margin: 10px 0;\n            font-size: 16px;\n        }\n        .content-section ul li span {\n            font-weight: bold;\n        }\n    </style>\n</head>\n<body>\n{{ $('Gemini总结').item.json.text }}\n</body>\n</html>",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        780,
        220
      ],
      "id": "7a31858a-cb53-49e9-8602-3ba118caabf0",
      "name": "Send email",
      "webhookId": "98c2e275-077b-44fa-96b4-df6f7a4c56bd",
      "credentials": {
        "smtp": {
          "id": "z2LApZC6RxR7AdEb",
          "name": "SMTP account"
        }
      }
    }
  ],
  "pinData": {},
  "repo_name": "n8n_flow",
  "repo_owner": "xxx675702999",
  "repo_path": "flow",
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:每天运行一次": {
      "recurrenceRules": [
        20
      ]
    }
  },
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-08-03T10:19:18.000Z",
  "versionId": "6f62b0ee-925e-467a-8484-b16e91e2cf02"
}